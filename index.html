<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elite Financial Calculator - Complete Suite</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>Elite Financial Calculator</h1>
            <p class="subtitle">Complete Financial Planning Suite</p>
            <div class="branding">Built by Hemachand Gogula</div>
        </header>

        <nav class="tab-nav">
            <button class="tab-btn active" data-tab="emi">EMI Calculator</button>
            <button class="tab-btn" data-tab="prepayment">Prepayment Calculator</button>
            <button class="tab-btn" data-tab="sip">SIP Calculator</button>
            <button class="tab-btn" data-tab="swp">SWP Calculator</button>
            <button class="tab-btn" data-tab="wealth">Wealth Calculator</button>
            <button class="tab-btn" data-tab="bills">Bill Splitter</button>
            <button class="tab-btn" data-tab="card-analysis">Card Analysis</button>
        </nav>

        <!-- EMI Calculator Tab -->
        <div id="emi" class="tab-content active">
            <div class="calculator-container">
                <h2>EMI Calculator</h2>
                <div class="input-section">
                    <div class="input-group">
                        <label for="loan-amount">Loan Amount (‚Çπ)</label>
                        <input type="number" id="loan-amount" placeholder="e.g., 500000">
                    </div>
                    <div class="input-group">
                        <label for="interest-rate">Annual Interest Rate (%)</label>
                        <input type="number" id="interest-rate" step="0.01" placeholder="e.g., 8.5">
                    </div>
                    <div class="input-group">
                        <label for="loan-tenure">Loan Tenure (Years)</label>
                        <input type="number" id="loan-tenure" placeholder="e.g., 20">
                    </div>
                    <button class="btn btn--primary" onclick="calculateEMI()">Calculate EMI</button>
                </div>
                <div id="emi-results" class="results-section hidden">
                    <div class="result-card">
                        <h3>EMI Results</h3>
                        <div class="result-item">
                            <span class="label">Monthly EMI:</span>
                            <span class="value" id="monthly-emi">‚Çπ0</span>
                        </div>
                        <div class="result-item">
                            <span class="label">Total Amount Payable:</span>
                            <span class="value" id="total-amount">‚Çπ0</span>
                        </div>
                        <div class="result-item">
                            <span class="label">Total Interest:</span>
                            <span class="value" id="total-interest">‚Çπ0</span>
                        </div>
                        <div class="result-item">
                            <span class="label">Interest Percentage:</span>
                            <span class="value" id="interest-percentage">0%</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Enhanced Prepayment Calculator Tab -->
        <div id="prepayment" class="tab-content">
            <div class="calculator-container">
                <h2>Multiple Prepayment Calculator</h2>
                <div class="input-section">
                    <div class="input-group">
                        <label for="prep-loan-amount">Loan Amount (‚Çπ)</label>
                        <input type="number" id="prep-loan-amount" placeholder="e.g., 500000">
                    </div>
                    <div class="input-group">
                        <label for="prep-interest-rate">Annual Interest Rate (%)</label>
                        <input type="number" id="prep-interest-rate" step="0.01" placeholder="e.g., 8.5">
                    </div>
                    <div class="input-group">
                        <label for="prep-tenure">Loan Tenure (Years)</label>
                        <input type="number" id="prep-tenure" placeholder="e.g., 20">
                    </div>
                    <button class="btn btn--secondary" onclick="setupLoanDetails()">Setup Loan Details</button>
                </div>

                <div id="prepayment-section" class="hidden">
                    <h3>Add Prepayments</h3>
                    <div class="prepayment-input">
                        <div class="input-group">
                            <label for="prepayment-amount-input">Prepayment Amount (‚Çπ)</label>
                            <input type="number" id="prepayment-amount-input" placeholder="e.g., 100000">
                        </div>
                        <div class="input-group">
                            <label for="prepayment-month-input">After Month</label>
                            <input type="number" id="prepayment-month-input" placeholder="e.g., 12">
                        </div>
                        <div class="input-group">
                            <label for="prepayment-option">Prepayment Option</label>
                            <select id="prepayment-option">
                                <option value="reduce-tenure">Reduce Tenure</option>
                                <option value="reduce-emi">Reduce EMI</option>
                            </select>
                        </div>
                        <button class="btn btn--secondary" onclick="addPrepayment()">Add Prepayment</button>
                    </div>
                    
                    <div id="prepayments-list" class="prepayments-list"></div>
                    <button class="btn btn--primary" onclick="calculateMultiplePrepayments()" id="calculate-prep-btn" style="display:none;">Calculate Savings</button>
                </div>

                <div id="prepayment-results" class="results-section hidden">
                    <div class="result-card">
                        <h3>Prepayment Analysis</h3>
                        <div class="comparison-grid">
                            <div class="comparison-item">
                                <h4>Without Prepayments</h4>
                                <div class="result-item">
                                    <span class="label">Monthly EMI:</span>
                                    <span class="value" id="prep-original-emi">‚Çπ0</span>
                                </div>
                                <div class="result-item">
                                    <span class="label">Total Interest:</span>
                                    <span class="value" id="prep-original-interest">‚Çπ0</span>
                                </div>
                                <div class="result-item">
                                    <span class="label">Total Amount:</span>
                                    <span class="value" id="prep-original-total">‚Çπ0</span>
                                </div>
                            </div>
                            <div class="comparison-item">
                                <h4>With Prepayments</h4>
                                <div class="result-item">
                                    <span class="label">Total Prepayments:</span>
                                    <span class="value" id="total-prepayments">‚Çπ0</span>
                                </div>
                                <div class="result-item">
                                    <span class="label">Total Interest:</span>
                                    <span class="value" id="prep-new-interest">‚Çπ0</span>
                                </div>
                                <div class="result-item">
                                    <span class="label">Total Amount:</span>
                                    <span class="value" id="prep-new-total">‚Çπ0</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- NEW: Dual Savings Cards -->
                        <div class="savings-cards-grid">
                            <div class="savings-card">
                                <h4>‚è∞ Time Saved</h4>
                                <div class="result-item highlight">
                                    <span class="label">Time Saved:</span>
                                    <span class="value" id="time-savings">0 months</span>
                                </div>
                                <div class="result-item">
                                    <span class="label">New Tenure:</span>
                                    <span class="value" id="new-tenure">0 months</span>
                                </div>
                            </div>
                            <div class="savings-card">
                                <h4>üí∞ EMI Savings</h4>
                                <div class="result-item highlight">
                                    <span class="label">Interest Savings:</span>
                                    <span class="value" id="interest-savings">‚Çπ0</span>
                                </div>
                                <div class="result-item" id="emi-reduction-info">
                                    <span class="label">EMI Reduction:</span>
                                    <span class="value" id="emi-reduction">‚Çπ0</span>
                                </div>
                            </div>
                        </div>
                        
                        <div id="prepayment-schedule" class="schedule-table"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Enhanced SIP Calculator Tab -->
        <div id="sip" class="tab-content">
            <div class="calculator-container">
                <h2>SIP Calculator with Lumpsum Option</h2>
                <div class="methodology-note">
                    <p><strong>Groww Methodology:</strong> Uses compound interest with monthly compounding. SIP Formula: M = P √ó ({[1 + i]^n ‚Äì 1} / i) √ó (1 + i)</p>
                </div>
                
                <div class="sip-tabs">
                    <button class="sip-tab-btn active" data-sip-tab="sip-only">SIP Only</button>
                    <button class="sip-tab-btn" data-sip-tab="lumpsum-only">Lumpsum Only</button>
                    <button class="sip-tab-btn" data-sip-tab="sip-lumpsum">SIP + Lumpsum</button>
                </div>

                <!-- SIP Only -->
                <div id="sip-only" class="sip-tab-content active">
                    <div class="input-section">
                        <div class="input-group">
                            <label for="sip-amount">Monthly SIP Amount (‚Çπ)</label>
                            <input type="number" id="sip-amount" placeholder="e.g., 5000">
                        </div>
                        <div class="input-group">
                            <label for="sip-return">Expected Annual Return (%)</label>
                            <input type="number" id="sip-return" step="0.01" placeholder="e.g., 12">
                        </div>
                        <div class="input-group">
                            <label for="sip-tenure">Investment Period (Years)</label>
                            <input type="number" id="sip-tenure" placeholder="e.g., 10">
                        </div>
                        <button class="btn btn--primary" onclick="calculateSIP()">Calculate SIP</button>
                    </div>
                    <div id="sip-results" class="results-section hidden">
                        <div class="result-card">
                            <h3>SIP Investment Results</h3>
                            <div class="result-item">
                                <span class="label">Total Investment:</span>
                                <span class="value" id="sip-total-investment">‚Çπ0</span>
                            </div>
                            <div class="result-item">
                                <span class="label">Maturity Amount:</span>
                                <span class="value" id="sip-maturity-amount">‚Çπ0</span>
                            </div>
                            <div class="result-item highlight">
                                <span class="label">Capital Gains:</span>
                                <span class="value" id="sip-capital-gains">‚Çπ0</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Lumpsum Only -->
                <div id="lumpsum-only" class="sip-tab-content">
                    <div class="input-section">
                        <div class="input-group">
                            <label for="lumpsum-amount">Lumpsum Investment (‚Çπ)</label>
                            <input type="number" id="lumpsum-amount" placeholder="e.g., 100000">
                        </div>
                        <div class="input-group">
                            <label for="lumpsum-return">Expected Annual Return (%)</label>
                            <input type="number" id="lumpsum-return" step="0.01" placeholder="e.g., 12">
                        </div>
                        <div class="input-group">
                            <label for="lumpsum-tenure">Investment Period (Years)</label>
                            <input type="number" id="lumpsum-tenure" placeholder="e.g., 10">
                        </div>
                        <button class="btn btn--primary" onclick="calculateLumpsum()">Calculate Lumpsum</button>
                    </div>
                    <div id="lumpsum-results" class="results-section hidden">
                        <div class="result-card">
                            <h3>Lumpsum Investment Results</h3>
                            <div class="result-item">
                                <span class="label">Initial Investment:</span>
                                <span class="value" id="lumpsum-initial-investment">‚Çπ0</span>
                            </div>
                            <div class="result-item">
                                <span class="label">Maturity Amount:</span>
                                <span class="value" id="lumpsum-maturity-amount">‚Çπ0</span>
                            </div>
                            <div class="result-item highlight">
                                <span class="label">Capital Gains:</span>
                                <span class="value" id="lumpsum-capital-gains">‚Çπ0</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- SIP + Lumpsum Combined -->
                <div id="sip-lumpsum" class="sip-tab-content">
                    <div class="input-section">
                        <div class="input-group">
                            <label for="combined-sip-amount">Monthly SIP Amount (‚Çπ)</label>
                            <input type="number" id="combined-sip-amount" placeholder="e.g., 5000">
                        </div>
                        <div class="input-group">
                            <label for="combined-lumpsum-amount">Initial Lumpsum Investment (‚Çπ)</label>
                            <input type="number" id="combined-lumpsum-amount" placeholder="e.g., 50000">
                        </div>
                        <div class="input-group">
                            <label for="combined-return">Expected Annual Return (%)</label>
                            <input type="number" id="combined-return" step="0.01" placeholder="e.g., 12">
                        </div>
                        <div class="input-group">
                            <label for="combined-tenure">Investment Period (Years)</label>
                            <input type="number" id="combined-tenure" placeholder="e.g., 10">
                        </div>
                        <button class="btn btn--primary" onclick="calculateCombined()">Calculate Combined</button>
                    </div>
                    <div id="combined-results" class="results-section hidden">
                        <div class="result-card">
                            <h3>Combined Investment Results</h3>
                            <div class="comparison-grid">
                                <div class="comparison-item">
                                    <h4>SIP Component</h4>
                                    <div class="result-item">
                                        <span class="label">SIP Investment:</span>
                                        <span class="value" id="combined-sip-investment">‚Çπ0</span>
                                    </div>
                                    <div class="result-item">
                                        <span class="label">SIP Maturity:</span>
                                        <span class="value" id="combined-sip-maturity">‚Çπ0</span>
                                    </div>
                                </div>
                                <div class="comparison-item">
                                    <h4>Lumpsum Component</h4>
                                    <div class="result-item">
                                        <span class="label">Lumpsum Investment:</span>
                                        <span class="value" id="combined-lumpsum-investment">‚Çπ0</span>
                                    </div>
                                    <div class="result-item">
                                        <span class="label">Lumpsum Maturity:</span>
                                        <span class="value" id="combined-lumpsum-maturity">‚Çπ0</span>
                                    </div>
                                </div>
                            </div>
                            <div class="savings-summary">
                                <div class="result-item highlight">
                                    <span class="label">Total Investment:</span>
                                    <span class="value" id="combined-total-investment">‚Çπ0</span>
                                </div>
                                <div class="result-item highlight">
                                    <span class="label">Total Maturity Amount:</span>
                                    <span class="value" id="combined-total-maturity">‚Çπ0</span>
                                </div>
                                <div class="result-item highlight">
                                    <span class="label">Total Capital Gains:</span>
                                    <span class="value" id="combined-total-gains">‚Çπ0</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- SWP Calculator Tab -->
        <div id="swp" class="tab-content">
            <div class="calculator-container">
                <h2>SWP Calculator</h2>
                <div class="methodology-note">
                    <p><strong>Systematic Withdrawal Plan:</strong> Regular withdrawals from your investment with remaining balance earning returns</p>
                </div>
                <div class="input-section">
                    <div class="input-group">
                        <label for="swp-initial-investment">Initial Investment (‚Çπ)</label>
                        <input type="number" id="swp-initial-investment" placeholder="e.g., 1000000">
                    </div>
                    <div class="input-group">
                        <label for="swp-withdrawal">Monthly Withdrawal (‚Çπ)</label>
                        <input type="number" id="swp-withdrawal" placeholder="e.g., 8000">
                    </div>
                    <div class="input-group">
                        <label for="swp-return">Expected Annual Return (%)</label>
                        <input type="number" id="swp-return" step="0.01" placeholder="e.g., 10">
                    </div>
                    <div class="input-group">
                        <label for="swp-duration">Withdrawal Period (Years)</label>
                        <input type="number" id="swp-duration" placeholder="e.g., 15">
                    </div>
                    <button class="btn btn--primary" onclick="calculateSWP()">Calculate SWP</button>
                </div>
                <div id="swp-results" class="results-section hidden">
                    <div class="result-card">
                        <h3>SWP Analysis</h3>
                        <div class="result-item">
                            <span class="label">Total Withdrawals:</span>
                            <span class="value" id="swp-total-withdrawal">‚Çπ0</span>
                        </div>
                        <div class="result-item">
                            <span class="label">Remaining Balance:</span>
                            <span class="value" id="swp-remaining-balance">‚Çπ0</span>
                        </div>
                        <div class="result-item highlight">
                            <span class="label">Total Value Generated:</span>
                            <span class="value" id="swp-total-value">‚Çπ0</span>
                        </div>
                        <div id="swp-sustainability" class="sustainability-note"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Wealth Calculator Tab -->
        <div id="wealth" class="tab-content">
            <div class="calculator-container">
                <h2>Wealth Calculator</h2>
                <div class="wealth-tabs">
                    <button class="wealth-tab-btn active" data-wealth-tab="goal">Goal Planning</button>
                    <button class="wealth-tab-btn" data-wealth-tab="retirement">Retirement Planning</button>
                    <button class="wealth-tab-btn" data-wealth-tab="investment">Investment Comparison</button>
                </div>

                <!-- Goal Planning -->
                <div id="goal" class="wealth-tab-content active">
                    <h3>Financial Goal Planning</h3>
                    <div class="input-section">
                        <div class="input-group">
                            <label for="goal-amount">Target Goal Amount (‚Çπ)</label>
                            <input type="number" id="goal-amount" placeholder="e.g., 2000000">
                        </div>
                        <div class="input-group">
                            <label for="goal-timeline">Time to Achieve Goal (Years)</label>
                            <input type="number" id="goal-timeline" placeholder="e.g., 10">
                        </div>
                        <div class="input-group">
                            <label for="goal-return">Expected Annual Return (%)</label>
                            <input type="number" id="goal-return" step="0.01" placeholder="e.g., 12">
                        </div>
                        <button class="btn btn--primary" onclick="calculateGoalPlanning()">Calculate Monthly SIP</button>
                    </div>
                    <div id="goal-results" class="results-section hidden">
                        <div class="result-card">
                            <h3>Goal Planning Results</h3>
                            <div class="result-item highlight">
                                <span class="label">Required Monthly SIP:</span>
                                <span class="value" id="required-sip">‚Çπ0</span>
                            </div>
                            <div class="result-item">
                                <span class="label">Total Investment:</span>
                                <span class="value" id="goal-total-investment">‚Çπ0</span>
                            </div>
                            <div class="result-item">
                                <span class="label">Capital Gains:</span>
                                <span class="value" id="goal-capital-gains">‚Çπ0</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- REDESIGNED Retirement Planning -->
                <div id="retirement" class="wealth-tab-content">
                    <h3>üèñÔ∏è Retirement Planning - Two Phase Analysis</h3>
                    <div class="methodology-note">
                        <p><strong>Smart Retirement Planning:</strong> Calculate corpus building + verify monthly income sufficiency. Example: ‚Çπ1 Lakh monthly needs ‚Çπ2 Crores at 6% annual return.</p>
                    </div>
                    
                    <div class="retirement-phases">
                        <div class="phase-section">
                            <h4>üìä Phase 1: Accumulation (Corpus Building)</h4>
                            <div class="input-section">
                                <div class="input-group">
                                    <label for="current-age">Current Age</label>
                                    <input type="number" id="current-age" placeholder="e.g., 30">
                                </div>
                                <div class="input-group">
                                    <label for="retirement-age">Retirement Age</label>
                                    <input type="number" id="retirement-age" placeholder="e.g., 45">
                                </div>
                                <div class="input-group">
                                    <label for="target-corpus">Target Retirement Corpus (‚Çπ)</label>
                                    <input type="number" id="target-corpus" placeholder="e.g., 20000000">
                                </div>
                                <div class="input-group">
                                    <label for="accumulation-return">Expected Annual Return (Accumulation) %</label>
                                    <input type="number" id="accumulation-return" step="0.01" placeholder="e.g., 12">
                                </div>
                            </div>
                        </div>
                        
                        <div class="phase-section">
                            <h4>üí∞ Phase 2: Withdrawal (Income Verification)</h4>
                            <div class="input-section">
                                <div class="input-group">
                                    <label for="desired-monthly-income">Desired Monthly Income (‚Çπ)</label>
                                    <input type="number" id="desired-monthly-income" placeholder="e.g., 100000">
                                </div>
                                <div class="input-group">
                                    <label for="withdrawal-return">Expected Annual Return (Withdrawal) %</label>
                                    <input type="number" id="withdrawal-return" step="0.01" placeholder="e.g., 6">
                                </div>
                                <div class="input-group">
                                    <label for="withdrawal-duration">Income Duration (Years)</label>
                                    <input type="number" id="withdrawal-duration" placeholder="e.g., 25">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <button class="btn btn--primary" onclick="calculateAdvancedRetirement()">Calculate Complete Retirement Plan</button>
                    
                    <div id="retirement-results" class="results-section hidden">
                        <div class="result-card">
                            <h3>üéØ Complete Retirement Analysis</h3>
                            
                            <!-- Phase 1 Results -->
                            <div class="retirement-phase-results">
                                <div class="phase-result-card">
                                    <h4>üìä Phase 1: Accumulation Results</h4>
                                    <div class="result-item">
                                        <span class="label">Years to Build Corpus:</span>
                                        <span class="value" id="years-to-retirement">0 years</span>
                                    </div>
                                    <div class="result-item highlight">
                                        <span class="label">Required Monthly SIP:</span>
                                        <span class="value" id="retirement-monthly-sip">‚Çπ0</span>
                                    </div>
                                    <div class="result-item">
                                        <span class="label">Total SIP Investment:</span>
                                        <span class="value" id="retirement-total-investment">‚Çπ0</span>
                                    </div>
                                    <div class="result-item">
                                        <span class="label">Target Corpus:</span>
                                        <span class="value" id="final-corpus">‚Çπ0</span>
                                    </div>
                                </div>
                                
                                <!-- Phase 2 Results -->
                                <div class="phase-result-card">
                                    <h4>üí∞ Phase 2: Income Sufficiency Check</h4>
                                    <div class="result-item">
                                        <span class="label">Desired Monthly Income:</span>
                                        <span class="value" id="target-monthly-income">‚Çπ0</span>
                                    </div>
                                    <div class="result-item">
                                        <span class="label">Corpus Can Provide:</span>
                                        <span class="value" id="sustainable-monthly-income">‚Çπ0</span>
                                    </div>
                                    <div class="result-item highlight">
                                        <span class="label">Income Duration:</span>
                                        <span class="value" id="income-duration">0 years</span>
                                    </div>
                                    <div class="result-item">
                                        <span class="label">Remaining Balance:</span>
                                        <span class="value" id="remaining-corpus">‚Çπ0</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Sufficiency Analysis -->
                            <div class="sufficiency-analysis">
                                <div id="sufficiency-result" class="sufficiency-card">
                                    <h4 id="sufficiency-title">üìä Sufficiency Analysis</h4>
                                    <div id="sufficiency-message" class="sufficiency-message"></div>
                                    <div id="sufficiency-recommendations" class="recommendations"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Investment Comparison -->
                <div id="investment" class="wealth-tab-content">
                    <h3>Investment Comparison</h3>
                    <div class="input-section">
                        <div class="input-group">
                            <label for="comparison-years">Investment Period (Years)</label>
                            <input type="number" id="comparison-years" placeholder="e.g., 10">
                        </div>
                        <button class="btn btn--secondary" onclick="addComparator()">Add Investment Option</button>
                    </div>
                    <div id="comparators-container"></div>
                    <button class="btn btn--primary" onclick="compareInvestments()" id="compare-btn" style="display:none;">Compare Investments</button>
                    <div id="comparison-results" class="results-section hidden">
                        <div class="result-card">
                            <h3>Investment Comparison Results</h3>
                            <div id="comparison-table"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Enhanced Bill Splitter Tab -->
        <div id="bills" class="tab-content">
            <div class="calculator-container">
                <h2>Bill Splitter</h2>
                <div class="input-section">
                    <div class="input-group">
                        <label for="group-members">Group Members (comma separated)</label>
                        <input type="text" id="group-members" placeholder="e.g., Alice, Bob, Charlie">
                    </div>
                    <div class="input-group">
                        <label for="new-member">Add New Member</label>
                        <input type="text" id="new-member" placeholder="Enter new member name">
                    </div>
                    <button class="btn btn--secondary" onclick="setupGroup()">Setup Group</button>
                    <button class="btn btn--secondary" onclick="addNewMember()">Add Member</button>
                </div>
                
                <div id="expenses-section" class="hidden">
                    <h3>Add Expenses</h3>
                    <div class="expense-input">
                        <div class="input-group">
                            <label for="expense-description">Expense Description</label>
                            <input type="text" id="expense-description" placeholder="e.g., Dinner at restaurant">
                        </div>
                        <div class="input-group">
                            <label for="expense-amount">Amount (‚Çπ)</label>
                            <input type="number" id="expense-amount" placeholder="e.g., 1200">
                        </div>
                        <div class="input-group">
                            <label for="expense-payer">Paid by</label>
                            <select id="expense-payer"></select>
                        </div>
                        <div class="input-group">
                            <label>Split among (select all involved)</label>
                            <div id="split-checkboxes" class="checkbox-group"></div>
                        </div>
                        <button class="btn btn--secondary" onclick="addExpense()">Add Expense</button>
                    </div>
                    
                    <div id="expenses-list" class="expenses-list"></div>
                    <button class="btn btn--primary" onclick="calculateSplit()" id="calculate-split-btn" style="display:none;">Calculate Split</button>
                </div>
                
                <div id="split-results" class="results-section hidden">
                    <div class="result-card">
                        <h3>Bill Split Results</h3>
                        <div id="individual-balances"></div>
                        <div id="settlement-instructions"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- FIXED Card Analysis Tab -->
        <div id="card-analysis" class="tab-content">
            <div class="calculator-container">
                <h2>Card Transaction Analysis</h2>
                <div class="methodology-note">
                    <p><strong>Upload your transaction history:</strong> Support for CSV format with columns: Date, Description, Amount. We'll automatically categorize your spending.</p>
                </div>
                
                <div class="file-upload-section">
                    <div class="upload-container">
                        <div class="input-group">
                            <label for="transaction-file">Upload Transaction File (CSV)</label>
                            <input type="file" id="transaction-file" accept=".csv" onchange="handleFileUpload(event)">
                        </div>
                    </div>
                    
                    <div class="manual-input-section">
                        <div class="input-group">
                            <label>Or manually add transactions:</label>
                        </div>
                        <div class="manual-transaction-form">
                            <div class="manual-input-group">
                                <label for="transaction-date">Date</label>
                                <input type="date" id="transaction-date">
                            </div>
                            <div class="manual-input-group">
                                <label for="transaction-description">Description</label>
                                <input type="text" id="transaction-description" placeholder="Transaction description">
                            </div>
                            <div class="manual-input-group">
                                <label for="transaction-amount">Amount (‚Çπ)</label>
                                <input type="number" id="transaction-amount" placeholder="0">
                            </div>
                            <div class="manual-input-group">
                                <button class="btn btn--secondary" onclick="addManualTransaction()">Add Transaction</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="analysis-results" class="results-section hidden">
                    <div class="result-card">
                        <h3>Spending Analysis</h3>
                        
                        <!-- Category Breakdown Chart -->
                        <div class="chart-container" style="position: relative; height: 400px;">
                            <canvas id="category-chart"></canvas>
                        </div>
                        
                        <!-- Monthly Spending Chart -->
                        <div class="chart-container" style="position: relative; height: 400px; margin-top: 20px;">
                            <canvas id="monthly-chart"></canvas>
                        </div>
                        
                        <!-- Category Summary Table -->
                        <div id="category-summary" class="category-summary"></div>
                        
                        <!-- Transaction List -->
                        <div id="transaction-list" class="transaction-list">
                            <h4>Recent Transactions</h4>
                            <div id="transactions-table"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>